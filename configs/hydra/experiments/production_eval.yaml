# @package _global_

defaults:
  - override /model: large
  - override /data: eval_small
  - override /training: production

# Memory-optimized evaluation overrides
training:
  output_dir: ./outputs/production_model
  per_device_eval_batch_size: 1  # Reduce batch size for evaluation
  eval_accumulation_steps: 1  # Accumulate gradients over multiple steps
  dataloader_num_workers: 1  # Reduce number of workers
  gradient_checkpointing: true  # Keep gradient checkpointing enabled
  fp16: false
  bf16: true
  dataloader_pin_memory: false  # Disable pinned memory to save RAM

  # Disable training-specific settings for eval
  per_device_train_batch_size: 1
  gradient_accumulation_steps: 1

  # Evaluation only
  do_train: false
  do_eval: true